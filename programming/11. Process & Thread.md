# 사전 지식

## 프로그램

- 컴퓨터가 실행할 수 있는 명령어들의 집합

## 프로세스

- 컴퓨터에서 실행 중인 프로그램.
- 각각의 프로세스는 **독립된 메모리 공간** 을 할당 받음.
- 명령어들과 데이터를 가짐.

## CPU

- 명령어를 실행하는 연산 장치

## 메인 메모리

- 프로세스가 CPU에서 실행되기 위해 대기하는 곳

## IO (input / output)

- 파일을 읽고 쓰거나 네트워크의 어딘가와 데이터를 주고 받는 것.
- 입출력 장치와 데이터를 주거나 받는 것
    - ex / 마우스, 키보드

# 단일 프로세스 시스템

## 특징

- 한 번에 하나의 프로그램만 실행됨.
- CPU 사용률이 좋지 않음.
- 실행 중에 있는 프로세스가 I/O 작업을 하는 동안 CPU가 놀게 됨
    - 단일 프로세스의 단점.

## 해결책

여러 개의 프로그램을 메모리에 올려놓고 동시에 실행시키자. → **멀티 프로그래밍**

IO 작업이 발생하면 다른 프로세스가 CPU에서 실행됨.

# **멀티 프로그래밍**

CPU의 사용을 극대화 함.

단점으로는 CPU의 사용 시간이 길어지면 다른 프로세스는 계속 대기하게 됨.

→ 프로세스는 한번 CPU를 사용할 때 **아주 짧은 시간(quantum)만 CPU에서 실행되도록** 하자.

→ 이런 종류의 시스템을 **멀티 태스킹**이라고 한다.

# 멀티 태스킹

- **프로세스의 응답시간을 최소화 시키는데 목적.**
- 타임 슬랏을 아주 잘게 쪼개서 프로세스들이 번갈아 교대하며 동시에 여러 프로그램이 실행되는 것과 같이 수행함을 목적으로 함.

## 아쉬움

- 하나의 프로세스가 동시에 여러 작업을 수행하지는 못함
- 프로세스의 컨텍스트 스위칭은 무거운 작업이다.
- 프로세스끼리 데이터 공유가 까다롭다 (IPC 필요)
- 한 CPU에 듀얼 코어를 두어 전체적 성능 향상시키는 방향으로 전환
    - 싱글 코어는 발열 등 이슈가 있음.
- 이를 위해 스레드 개념이 나옴

# 스레드

- 프로세스는 한 개 이상의 스레드를 가질 수 있다.
- 한 프로세스 안에서 여러 개의 작업들은 동시에 수행하기 위함.
- CPU에서 실행되는 단위 (unit of execution)
- 같은 프로세스의 스레드들끼리 컨텍스트 스위칭이 가볍다.
    - 자신들이 속한 프로세스의 메모리 영역을 공유함.
    - 각각 스레드마다 고유한 스택 메모리를 가짐.
    - heap, data, code 공유

# 멀티 스레딩

- 하나의 프로세스가 동시에 여러 작업을 실행하는데 목적

## 확장된 멀티태스킹 개념

여러 프로세스와 여러 스레드가 짧게 쪼개진 cpu time을 나눠 갖는 것

## 멀티 프로세싱

- 두 개 이상의 프로세서나 코어를 활용하는 시스템

# 예제

|  |   | 멀티 태스킹 |  멀티 스레딩 |  멀티 프로세싱 |
| --- | --- | --- | --- | --- |
| 싱글 코어 CPU | 싱글 스레드 프로세스 두 개 | O | X | X |
| 싱글 코어 CPU | 듀얼 스레드 프로세스 한 개 | O | O | X |
| 듀얼 코어 CPU | 싱글 스레드 프로세스 두 개 | X | X | O |
| 듀얼 코어 CPU | 듀얼 스레드 프로세스 한 개 | X | O | O |
| 듀얼 코어 CPU | 듀얼 스레드 프로세스 두  | O | O | O |

---

# 스레드 콘텍스트 스위칭이 프로세스 콘텍스트 스위칭 보다 빠른 이유

## context switching

- CPU / 코어에서 실행 중이던 프로세스 / 스레드가 다른 프로세스 / 스레드로 교체되는 것.

### context란?

프로세스 / 스레드의 상태

### 왜 필요함?

여러 프로세스 / 스레드를 동시에 실행하기 위해

### 언제 발생하는가?

주어진 quantum을 다 사용했거나 IO 작업을 해야하거나 다른 리소스를 기다려야 하거나 so on..

### 누구에 의해 실행되는가?

- OS 커널
    - 각종 리소스를 관리 / 감독하는 역할

# Ref
- 쉬운 코드 유튜브 (https://www.youtube.com/@ez.)
